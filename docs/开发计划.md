# MiniChat 开发计划

## 项目时间线

**预计总开发周期**: 10-14 周  
**开始时间**: 2026-01-21  
**预计完成时间**: 2026-04-15

---

## 第一阶段：基础框架搭建（第 1-2 周）

### 目标
建立项目基础架构，完成开发环境配置和基础工具类实现。

### 任务清单

#### Week 1
- [x] 创建项目目录结构
- [x] 编写设计文档
- [ ] 搭建 Python 虚拟环境
- [ ] 安装基础依赖包（PyQt5）
- [ ] 配置 Git 仓库
- [ ] 实现配置管理模块 (`config.py`)
- [ ] 实现日志工具类 (`utils/logger.py`)

#### Week 2
- [ ] 设计数据库表结构
- [ ] 实现数据库管理类 (`database/db_manager.py`)
- [ ] 编写数据模型类 (`core/models.py`)
  - User 类
  - Message 类
  - FileTransfer 类
- [ ] 编写基础工具函数
- [ ] 单元测试：配置、日志、数据库

### 交付物
- ✅ 完整的项目目录结构
- ✅ 设计文档
- ⬜ 可运行的基础框架
- ⬜ 数据库初始化脚本
- ⬜ 开发环境配置文档

---

## 第二阶段：网络通信实现（第 3-5 周）

### 目标
实现 UDP 广播和 TCP 通信，完成用户发现和消息传输功能。

### 任务清单

#### Week 3: UDP 广播服务
- [ ] 实现 UDP 广播发送功能
- [ ] 实现 UDP 广播接收功能
- [ ] 实现心跳包机制
- [ ] 用户在线检测与超时处理
- [ ] 单元测试：广播服务

#### Week 4: TCP 消息服务
- [ ] 实现 TCP 服务器（监听端口）
- [ ] 实现 TCP 客户端（发起连接）
- [ ] 消息序列化与反序列化
- [ ] 消息发送与接收
- [ ] 消息确认机制（ACK）
- [ ] 单元测试：TCP 服务

#### Week 5: 网络模块整合
- [ ] 整合 UDP 和 TCP 服务
- [ ] 实现自动重连机制
- [ ] 网络异常处理
- [ ] 多线程优化
- [ ] 集成测试：完整通信流程
- [ ] 压力测试：多用户并发

### 交付物
- ⬜ UDP 广播服务模块
- ⬜ TCP 消息服务模块
- ⬜ 网络通信测试报告
- ⬜ 网络协议文档

---

## 第三阶段：核心业务逻辑（第 6-8 周）

### 目标
实现用户管理、消息管理等核心业务功能。

### 任务清单

#### Week 6: 用户管理
- [ ] 实现 UserManager 类
- [ ] 用户 ID 生成算法
- [ ] 在线用户列表管理
- [ ] 用户信息存储与更新
- [ ] 用户状态变更通知
- [ ] 单元测试：用户管理

#### Week 7: 消息管理
- [ ] 实现 MessageManager 类
- [ ] 消息队列管理
- [ ] 消息历史记录
- [ ] 未读消息统计
- [ ] 消息搜索功能
- [ ] 单元测试：消息管理

#### Week 8: 核心逻辑整合
- [ ] 整合用户管理和消息管理
- [ ] 实现消息路由
- [ ] 实现群发消息
- [ ] 消息持久化
- [ ] 集成测试：核心功能
- [ ] 性能优化

### 交付物
- ⬜ 用户管理模块
- ⬜ 消息管理模块
- ⬜ 核心功能测试报告
- ⬜ API 文档

---

## 第四阶段：用户界面开发（第 9-11 周）

### 目标
开发完整的图形用户界面，实现良好的用户体验。

### 任务清单

#### Week 9: 主窗口开发
- [ ] 设计主窗口 UI 布局
- [ ] 实现 MainWindow 类
- [ ] 菜单栏功能
- [ ] 状态栏显示
- [ ] 窗口最小化/关闭逻辑
- [ ] UI 测试

#### Week 10: 聊天窗口开发
- [ ] 设计聊天窗口 UI 布局
- [ ] 实现 ChatWindow 类
- [ ] 消息显示组件（MessageWidget）
- [ ] 消息输入框
- [ ] 发送按钮功能
- [ ] 消息气泡样式
- [ ] UI 测试

#### Week 11: 组件开发与整合
- [ ] 用户列表组件（UserListWidget）
- [ ] 用户头像显示
- [ ] 右键菜单功能
- [ ] 新消息提醒
- [ ] 系统托盘功能
- [ ] UI 主题样式（QSS）
- [ ] 界面响应性优化
- [ ] 整体 UI 测试

### 交付物
- ⬜ 完整的图形界面
- ⬜ UI 组件库
- ⬜ 界面设计文档
- ⬜ 用户体验测试报告

---

## 第五阶段：高级功能实现（第 12-13 周）

### 目标
实现文件传输、群组聊天等高级功能。

### 任务清单

#### Week 12: 文件传输
- [ ] 实现 FileTransferService 类
- [ ] 文件选择对话框
- [ ] 文件元数据传输
- [ ] 文件分块传输
- [ ] 传输进度显示
- [ ] 文件完整性校验（MD5）
- [ ] 传输失败重试
- [ ] 单元测试：文件传输

#### Week 13: 高级功能
- [ ] 群组聊天功能
- [ ] 表情选择器（可选）
- [ ] 消息撤回功能（可选）
- [ ] 图片预览功能
- [ ] 聊天记录导出
- [ ] 用户设置界面
- [ ] 集成测试：高级功能

### 交付物
- ⬜ 文件传输模块
- ⬜ 群组聊天功能
- ⬜ 高级功能测试报告

---

## 第六阶段：测试与优化（第 14 周）

### 目标
全面测试，修复 Bug，优化性能，准备发布。

### 任务清单

#### Week 14: 全面测试
- [ ] 功能测试
  - 用户发现测试
  - 消息收发测试
  - 文件传输测试
  - 界面交互测试
- [ ] 兼容性测试
  - Windows 测试
  - macOS 测试
  - Linux 测试（可选）
- [ ] 压力测试
  - 多用户并发测试
  - 大文件传输测试
  - 长时间运行测试
- [ ] Bug 修复
- [ ] 性能优化
  - 内存优化
  - CPU 占用优化
  - 网络流量优化
- [ ] 代码审查与重构
- [ ] 编写用户手册
- [ ] 准备发布包

### 交付物
- ⬜ 完整的测试报告
- ⬜ Bug 修复记录
- ⬜ 性能优化报告
- ⬜ 用户手册
- ⬜ 可发布的应用程序

---

## 里程碑

| 里程碑 | 时间 | 目标 |
|--------|------|------|
| M1: 基础框架完成 | Week 2 结束 | 项目结构、配置、数据库就绪 |
| M2: 网络通信完成 | Week 5 结束 | UDP/TCP 通信正常工作 |
| M3: 核心功能完成 | Week 8 结束 | 用户管理、消息管理可用 |
| M4: 基础 UI 完成 | Week 11 结束 | 主要界面开发完成 |
| M5: 高级功能完成 | Week 13 结束 | 文件传输、群聊等功能实现 |
| M6: 发布版本 | Week 14 结束 | 测试通过，准备发布 |

---

## 风险管理

### 技术风险
| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|----------|
| 网络通信不稳定 | 高 | 中 | 增加重试机制，完善错误处理 |
| 多线程同步问题 | 高 | 中 | 使用成熟的线程同步机制，充分测试 |
| 文件传输失败 | 中 | 中 | 实现断点续传，校验机制 |
| 界面卡顿 | 中 | 低 | 异步处理，优化 UI 更新 |

### 进度风险
| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|----------|
| 开发进度延误 | 中 | 中 | 合理安排任务优先级，适当调整范围 |
| 测试时间不足 | 高 | 低 | 提前进行单元测试，持续集成 |
| 需求变更 | 中 | 低 | 保持模块化设计，预留扩展接口 |

---

## 质量保证

### 代码质量
- 遵循 PEP 8 编码规范
- 代码注释覆盖率 > 60%
- 单元测试覆盖率 > 70%
- 每周代码审查

### 测试策略
- 单元测试：每个模块开发完成后立即测试
- 集成测试：各阶段结束时进行
- 系统测试：第六阶段全面测试
- 用户验收测试：发布前邀请用户试用

### 文档要求
- 设计文档（已完成）✅
- API 文档（第三阶段）
- 用户手册（第六阶段）
- 开发日志（持续更新）

---

## 资源需求

### 人力资源
- 1 名开发人员（全职）

### 硬件资源
- 开发机器：1 台
- 测试机器：2-3 台（不同操作系统）

### 软件资源
- Python 3.8+
- PyQt5
- SQLite
- Git
- IDE（PyCharm / VS Code）

---

## 下一步行动

### 立即开始（本周）
1. ✅ 创建项目目录结构
2. ✅ 编写设计文档
3. ⬜ 搭建 Python 虚拟环境
4. ⬜ 安装依赖包
5. ⬜ 初始化 Git 仓库
6. ⬜ 实现配置管理和日志工具

### 本周目标
- 完成第一阶段 Week 1 的所有任务
- 为 Week 2 任务做好准备
- 确保开发环境完全就绪

---

**文档版本**: v1.0  
**创建日期**: 2026-01-21  
**最后更新**: 2026-01-21  
**负责人**: Robin Meng
